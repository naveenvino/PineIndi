//@version=6
indicator("Previous Week High/Low", overlay=true)

// Input parameters.
// `input.bool()` is described in the manual around line 561.
showPrevHigh = input.bool(true, title="Show Previous Week High")
showPrevLow  = input.bool(true, title="Show Previous Week Low")
// `input.color()` documented around line 566 lets users choose colors.
highColor    = input.color(color.green, title="High Line Color")
lowColor     = input.color(color.red, title="Low Line Color")
// Users can also set the line width with `input.int()` (manual line ~544).
lineWidth    = input.int(2, minval=1, title="Line Width")

// Retrieve last week’s levels.
// `request.security()` is documented in the manual (lines 968‑980)
// and allows fetching data from a higher timeframe.
prevWeekHigh = request.security(syminfo.tickerid, "W", high[1])
prevWeekLow  = request.security(syminfo.tickerid, "W", low[1])

// Plot horizontal lines with the `plot()` function (manual lines 610‑623).
plot(showPrevHigh ? prevWeekHigh : na,
     title="Prev Week High",
     color=highColor,
     linewidth=lineWidth,
     style=plot.style_line,    // plot style constants on lines 266‑268
     trackprice=true)          // extend value to the right scale

plot(showPrevLow ? prevWeekLow : na,
     title="Prev Week Low",
     color=lowColor,
     linewidth=lineWidth,
     style=plot.style_line,
     trackprice=true)

// Alerts using `alertcondition` (manual lines ~1025) and `ta.cross` (line ~360).
alertcondition(ta.cross(close, prevWeekHigh),
               title="Cross Prev Week High",
               message="Close crossed previous week's high")
alertcondition(ta.cross(close, prevWeekLow),
               title="Cross Prev Week Low",
               message="Close crossed previous week's low")
